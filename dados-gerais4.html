<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Participante - Dados Gerais (4)</title>
  <style>
    *{box-sizing:border-box}
    html, body { height:100%; }
    body{
      margin:0;font-family:Arial,Helvetica,sans-serif;background:#f1f1f1;
      display:flex;justify-content:center;align-items:center;min-height:100dvh;
    }
    .container{
      background:#fff;width:100%;max-width:400px;height:100dvh;
      display:flex;flex-direction:column;
    }

    /* Topbar */
    .topbar{
      background:#333;color:#fff;display:flex;align-items:center;justify-content:space-between;
      padding:10px 12px;font-weight:bold;flex-shrink:0;
    }
    .topbar .title{ text-transform:uppercase; letter-spacing:.5px; }
    .topbar img{ width:22px;height:22px;cursor:pointer; }

    /* Conteúdo */
    .content{flex:1;overflow-y:auto;padding:12px 16px 16px 16px}
    .subtitle{ color:#444;font-weight:bold;margin:2px 0 12px 0; }

    label{display:block;font-size:12px;color:#2f6f73;margin:10px 0 6px}
    .req::before{content:"* "; color:#d00; font-weight:bold}

    select, input[type="text"]{
      width:100%; padding:10px 12px; border:1px solid #ccc; border-radius:6px;
      background:#fff; font-size:14px; outline:none;
    }
    select:focus, input:focus{border-color:#888}

    /* Linhas lado a lado */
    .row-2{ display:flex; gap:14px; }
    .row-2 > .col{ flex:1; }

    /* Pager */
    .pager-dots{
      display:flex;justify-content:center;align-items:center;gap:8px;padding:8px 0
    }
    .pager-dot{
      display:inline-block;width:8px;height:8px;border-radius:50%;
      background:#cdd2d3;text-decoration:none;
    }
    .pager-dot:hover{ filter:brightness(0.9); }
    .pager-dot.active{ background:#2f6f73; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Topbar -->
    <div class="topbar">
      <img src="img/back.png" alt="Voltar" id="btnBack">
      <div class="title">DADOS GERAIS</div>
      <img src="img/check.png" alt="Confirmar" id="btnSave">
    </div>

    <div class="content">
      <div class="subtitle">IDENTIFICAÇÃO PARTICIPANTE</div>

      <!-- Nacionalidade (lista detalhada como no exemplo) -->
      <label class="req" for="nacionalidade">Nacionalidade</label>
      <select id="nacionalidade">
        <option value="" selected disabled>Selecione...</option>
        <option>Brasileiro nato</option>
        <option>Naturalizado</option>
        <option>Estrangeiro</option>
        <option>Brasileiro - filho bras. registrado em embaixada/consulado</option>
        <option>Brasileiro - filho bras. com direito à opção</option>
        <option>Brasileiro - filho bras. que optou por nacionalidade</option>
        <option>Brasileiro - português c/ igualdade de direitos</option>
        <option>Brasileiro - filho bras. a serviço do Brasil</option>
        <option>Brasileiro - filho de brasileiro nascido no exterior</option>
        <option>Naturalizado provisoriamente</option>
      </select>

      <!-- UF + Cidade -->
      <div class="row-2" style="margin-top:4px;">
        <div class="col">
          <label class="req" for="uf">UF</label>
          <select id="uf">
            <option value="" selected disabled>Selecione...</option>
            <option>AC</option><option>AL</option><option>AM</option><option>AP</option>
            <option>BA</option><option>CE</option><option>DF</option><option>ES</option>
            <option>GO</option><option>MA</option><option>MG</option><option>MS</option>
            <option>MT</option><option>PA</option><option>PB</option><option>PE</option>
            <option>PI</option><option>PR</option><option>RJ</option><option>RN</option>
            <option>RO</option><option>RR</option><option>RS</option><option>SC</option>
            <option>SE</option><option>SP</option><option>TO</option>
          </select>
        </div>
        <div class="col">
          <label class="req" for="cidade">Cidade</label>
          <select id="cidade" disabled>
            <option value="">Selecione a UF</option>
          </select>
        </div>
      </div>

      <!-- Sexo -->
      <label for="sexo" style="margin-top:4px;">Sexo</label>
      <select id="sexo">
        <option value="" selected disabled>Selecione...</option>
        <option>Masculino</option>
        <option>Feminino</option>
        <option>Outro</option>
        <option>Prefiro não informar</option>
      </select>

      <!-- Cor/Raça + Olhos -->
      <div class="row-2" style="margin-top:4px;">
        <div class="col">
          <label for="corRaca">Cor Pele/Raça</label>
          <select id="corRaca">
            <option value="" selected disabled>Selecione...</option>
            <option>Branca</option>
            <option>Preta</option>
            <option>Parda</option>
            <option>Amarela</option>
            <option>Indígena</option>
            <option>Não informada</option>
          </select>
        </div>
        <div class="col">
          <label for="corOlhos">Cor dos Olhos</label>
          <select id="corOlhos">
            <option value="" selected disabled>Selecione...</option>
            <option>Castanhos</option>
            <option>Pretos</option>
            <option>Azuis</option>
            <option>Verdes</option>
            <option>Mel</option>
            <option>Cinza</option>
            <option>Outro</option>
          </select>
        </div>
      </div>

      <!-- Estado Civil -->
      <label for="estadoCivil" style="margin-top:4px;">Estado Civil</label>
      <select id="estadoCivil">
        <option value="" selected disabled>Selecione...</option>
        <option>Solteiro(a)</option>
        <option>Casado(a)</option>
        <option>União estável</option>
        <option>Separado(a)</option>
        <option>Divorciado(a)</option>
        <option>Viúvo(a)</option>
      </select>

      <!-- Escolaridade -->
      <label for="escolaridade" style="margin-top:4px;">Escolaridade</label>
      <select id="escolaridade">
        <option value="" selected disabled>Selecione...</option>
        <option>Fundamental incompleto</option>
        <option>Fundamental completo</option>
        <option>Médio incompleto</option>
        <option>Médio completo</option>
        <option>Superior incompleto</option>
        <option>Superior completo</option>
        <option>Pós-graduação</option>
        <option>Mestrado</option>
        <option>Doutorado</option>
      </select>
    </div>

    <!-- Pager: 4 pontos, quarto ativo -->
    <div class="pager-dots" aria-label="Progresso">
      <a class="pager-dot" href="dados-gerais1.html" aria-label="Página 1"></a>
      <a class="pager-dot" href="dados-gerais2.html" aria-label="Página 2"></a>
      <a class="pager-dot" href="dados-gerais3.html" aria-label="Página 3"></a>
      <a class="pager-dot active" href="dados-gerais4.html" aria-label="Página 4"></a>
    </div>
  </div>

  <script>
    // Voltar
    document.getElementById('btnBack').addEventListener('click', ()=>{
      window.location.href = 'dados-gerais3.html';
    });

    // Confirmar (apenas exemplo)
    document.getElementById('btnSave').addEventListener('click', ()=>{
      alert('Dados revisados.');
    });

    /* ===== Cidades por UF (IBGE) =====
       Endpoint: https://servicodados.ibge.gov.br/api/v1/localidades/estados/{id}/municipios
       Necessita do ID (numérico) do estado — mapeado abaixo. */
    const UF_TO_ID = {
      "AC":12,"AL":27,"AM":13,"AP":16,"BA":29,"CE":23,"DF":53,"ES":32,"GO":52,
      "MA":21,"MG":31,"MS":50,"MT":51,"PA":15,"PB":25,"PE":26,"PI":22,"PR":41,
      "RJ":33,"RN":24,"RO":11,"RR":14,"RS":43,"SC":42,"SE":28,"SP":35,"TO":17
    };

    const ufSel = document.getElementById('uf');
    const cidSel = document.getElementById('cidade');

    ufSel.addEventListener('change', async ()=>{
      const uf = ufSel.value;
      cidSel.innerHTML = '';
      cidSel.disabled = true;

      if(!uf || !UF_TO_ID[uf]){
        cidSel.innerHTML = '<option value="">Selecione a UF</option>';
        return;
      }

      // Estado escolhido — mostra "Carregando…"
      cidSel.innerHTML = '<option value="">Carregando…</option>';

      try{
        const id = UF_TO_ID[uf];
        const resp = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${id}/municipios`);
        if(!resp.ok) throw new Error('Falha ao consultar IBGE');
        const data = await resp.json();

        // Ordena por nome e preenche
        data.sort((a,b)=> a.nome.localeCompare(b.nome, 'pt-BR'));

        cidSel.innerHTML = '<option value="" selected disabled>Selecione...</option>';
        for(const m of data){
          const opt = document.createElement('option');
          opt.value = m.nome;
          opt.textContent = m.nome;
          cidSel.appendChild(opt);
        }
        cidSel.disabled = false;
      }catch(err){
        cidSel.innerHTML = '<option value="">Não foi possível carregar as cidades</option>';
        cidSel.disabled = true;
        console.error(err);
      }
    });
  </script>
</body>
</html>
